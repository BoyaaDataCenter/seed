(function(){var uCheck={list:[]};$.fn.uCheck=function(name,val,opt,apiurl){uCheck.list.push([$(this),name,val,opt]);apiurl=apiurl||'http://cmslib.oa.com/';$.uc_api_url=apiurl;var url=apiurl+'tool/?id=userCheck';var exec=function(){var fn=function(I,name,val,opt){opt=opt&&typeof opt=='object'?opt:{};if(!opt.placeholder)opt.placeholder=opt.mode=='group'?'搜索部门':'搜索姓名';var s=[];if(!opt.noinput)s.push('<input uc_type="input"'+(opt.class?' class="'+opt.class+'"':'')+(opt.name?' name="'+opt.name+'"':'')+' autocomplete="off" type="text" placeholder="'+opt.placeholder+'" size="'+(opt.size||8)+'" style="margin-right:3px" />');if(!opt.nocheck){if(!opt.batchcheck){if(opt.limit==1){opt.batchcheck='点击选择'}else{opt.batchcheck='批量选择'}}s.push('<button uc_type="button" type="button">'+opt.batchcheck+'</button>')}delete opt.noinput;delete opt.nocheck;delete opt.size;delete opt.class;s.push('<span uc_type="list"></span>');if(opt.value_en){opt.value_en='[uc_type=value_en]';s.push('<input uc_type="value_en" type="hidden" value="'+val+'" name="'+name+'" />')}else if(opt.value_zh){opt.value_zh='[uc_type=value_zh]';s.push('<input uc_type="value_zh" type="hidden" value="'+val+'" name="'+name+'" />')}else{opt.value_id='[uc_type=value_id]';s.push('<input uc_type="value_id" type="hidden" value="'+val+'" name="'+name+'" />')}I.html(s.join(''));var set={mode:'all',button:'[uc_type=button]',input:'[uc_type=input]',list:'[uc_type=list]'};if(opt)$.extend(set,opt);I.userCheck(set);if(typeof set.callback=='function')set.callback(I,name,val,opt)};while(1){var v=uCheck.list.shift();if(!v)break;fn(v[0],v[1],v[2],v[3])}};if(uCheck.ready){exec()}else{if(uCheck.loading)return;uCheck.loading=1;$.getScript(url,function(){uCheck.ready=1;exec()})}}})();var _cmsCk=1;
